(this.webpackJsonpemilus=this.webpackJsonpemilus||[]).push([[14],{552:function(t,e,o){"use strict";o.d(e,"k",(function(){return l})),o.d(e,"d",(function(){return r})),o.d(e,"b",(function(){return d})),o.d(e,"i",(function(){return f})),o.d(e,"f",(function(){return u})),o.d(e,"c",(function(){return h})),o.d(e,"e",(function(){return m})),o.d(e,"h",(function(){return g})),o.d(e,"j",(function(){return p})),o.d(e,"a",(function(){return _})),o.d(e,"g",(function(){return v})),o.d(e,"l",(function(){return j}));var a=o(603),n=o.n(a),s=o(22),i=o(571),c=o.n(i),l=function(t,e,o,a){n.a.post(s.d+"/uploadFoto",{url:o,id:t,indice:e}).then((function(t){a(t.data)})).catch((function(t){console.log(t)}))},r=function(t){n.a.get(s.d+"/lista-prodotti-dashboard").then((function(e){c.a.set("lista_prodotti",e.data),t(e.data)})).catch((function(t){console.log(t)}))},d=function(t,e){n.a.get(s.d+"/lista-acquisti").then((function(o){for(var a=[],n=0;n<o.data.length;n++)for(var s=0;s<t.length;s++)t[s].idArticolo==o.data[n].idArticoloAcquistato&&(a.push({id:o.data[n].idAcquisto,name:o.data[n].nome+" "+o.data[n].cognome,image:"",date:o.data[n].dataAcquisto.split("T")[0],amount:o.data[n].totalePrezzo,numeroacquisti:o.data[n].numeroAcquisti,orderStatus:o.data[n].stato,colore:t[s].coloriDisp[o.data[n].indiceColore].color,nomearticolo:o.data[n].nomeArticolo,articoloCompleto:o.data[n],tracking:o.data[n].nrtracking,idordine:o.data[n].idordine,personalizzazione:o.data[n].personalizzazione}),n==o.data.length-1&&e(a))})).catch((function(t){console.log(t)}))},u=function(t,e){n.a.post(s.d+"/insertArticoli",t).then((function(t){e(t)})).catch((function(t){console.log(t)}))},f=function(t,e,o,a){console.log("idArt",t),console.log("listaFoto",e),console.log("values",o),n.a.put(s.d+"/updateArticolo",{id:t,lista_foto:e,values:o}).then((function(t){a(t)})).catch((function(t){console.log(t)}))},h=function(t){n.a.get(s.d+"/lista-foto").then((function(e){t(e.data)})).catch((function(t){console.log(t)}))},m=function(t,e){n.a.get(s.d+"/ordini-odierni").then((function(o){for(var a=[],n=0;n<o.data.length;n++)for(var s=0;s<t.length;s++)t[s].idArticolo===o.data[n].idArticoloAcquistato&&(null!=o.data.Nome&&null!=o.data.Cognome?a.push({id:n,name:o.data[n].Nome+" "+o.data[n].Cognome,amount:o.data[n].totalePrezzo,articolo:t[s].nomeArticolo,numero_acquisti:o.data[n].numeroAcquisti}):a.push({id:n,name:o.data[n].emailAcquirente,amount:o.data[n].totalePrezzo,articolo:t[s].nomeArticolo,numero_acquisti:o.data[n].numeroAcquisti}),n==o.data.length-1&&e(a))})).catch((function(t){console.log(t)}))},g=function(t,e,o){n.a.post(s.d+"/top-acquisti",{periodo:e}).then((function(e){for(var a=[],n=0;n<e.data.length;n++)for(var s=0;s<t.length;s++)t[s].idArticolo==e.data[n].idArticoloAcquistato&&(0==t[s].coloriDisp[e.data[n].indiceColore].image.length?a.push({name:t[s].nomeArticolo,image:"",category:t[s].categoria,sales:e.data[n].sum,status:"up",venduti:e.data[n].numerototaleacquisti}):a.push({name:t[s].nomeArticolo,image:t[s].coloriDisp[e.data[n].indiceColore].image[0],category:t[s].categoria,sales:e.data[n].sum,status:"up",venduti:e.data[n].numerototaleacquisti}),n==e.data.length-1&&o(a))})).catch((function(t){console.log(t)}))},p=function(t,e,o){n.a.put(s.d+"/update-tracking",{tracking:t,indice:e}).then((function(t){o(t)})).catch((function(t){console.log(t)}))},_=function(t,e){n.a.put(s.d+"/conferma-tracking",{indice:t}).then((function(t){e(t)})).catch((function(t){console.log(t)}))},v=function(t,e,o){n.a.post(s.d+"/insert-foto-ecommerce",{url:t,colonna_db:e}).then((function(t){o(t)})).catch((function(t){console.log(t)}))},j=function(t,e,o){n.a.put(s.d+"/upload-foto-ecommerce",{url:t,colonna_db:e}).then((function(t){o(t.data)})).catch((function(t){console.log(t)}))}},639:function(t,e,o){"use strict";var a=o(2),n=o(87),s=o(0),i=o(41),c=o(20);e.a=Object(i.b)((function(t){return{navType:t.theme.navType}}),{})((function(t){var e=t.children,o=t.background,i=t.className,l=t.overlap,r=t.navType,d=Object(s.useState)(0),u=Object(n.a)(d,2),f=u[0],h=u[1],m=Object(s.useRef)(null);Object(s.useEffect)((function(){if(r===c.d){var t=window.innerWidth,e=m.current.offsetWidth;h((t-e)/2)}}),[r]);return Object(a.jsx)("div",{ref:m,className:"page-header-alt ".concat(i||""," ").concat(l&&"overlap"),style:function(){var t={backgroundImage:o?"url(".concat(o,")"):"none"};return r===c.d&&(t.marginRight=-f,t.marginLeft=-f,t.paddingLeft=0,t.paddingRight=0),t}(),children:r===c.d?Object(a.jsx)("div",{className:"container",children:e}):Object(a.jsx)(a.Fragment,{children:e})})}))},905:function(t,e,o){"use strict";o.r(e);var a=o(2),n=o(0),s=o(600),i=o(552),c=o(564),l=o.n(c),r=o(100),d=o(101),u=o(214),f=o(122),h=o(121),m=o(698),g=o(697),p=o(514),_=o(120),v=o(508),j=o(91),b=function(t){Object(f.a)(o,t);var e=Object(h.a)(o);function o(t){var a;return Object(r.a)(this,o),(a=e.call(this,t)).selectFiles=a.selectFiles.bind(Object(u.a)(a)),a.uploadImages=a.uploadImages.bind(Object(u.a)(a)),a.state={selectedFiles:void 0,previewImages:[],vettoreFoto:[],inserita:!1,upload_completo:!1,caricamento:!1,vettore_foto_old:[],vettore_foto_old_2:[],indiceColore:[],cancellazione:!1,upload_completo_cancellazione:!1,position_state:[],enable_loop:!0,listaFoto:[]},a}return Object(d.a)(o,[{key:"componentDidMount",value:function(){var t=this;Object(i.c)((function(e){t.setState({listaFoto:e}),console.log("vettoreFotogi\xe0presenti",e),0!=e.length&&(null!=e[0].home_1&&t.setState({vettore_foto_old:[{uid:0,name:0,status:"done",url:e[0].home_1}]},(function(){console.log(t.state.vettore_foto_old)})),null!=e[0].home_2&&t.setState({vettore_foto_old_2:[{uid:1,name:1,status:"done",url:e[0].home_2}]},(function(){console.log(t.state.vettore_foto_old_2)})))}))}},{key:"selectFiles",value:function(t){for(var e=this,o=[],a=[],n=[],s=0;s<t.target.files.length;s++)o.push(URL.createObjectURL(t.target.files[s])),a.push(document.createElement("img"));this.setState({selectedFiles:t.target.files,previewImages:o,cancellazione:!1},(function(){for(var t=function(t){a[t].src=e.state.previewImages[t],a[t].onload=function(){console.log("dentro img",a[t]),console.log("NEW IMAGE width",a[t].width),console.log("NEW IMAGE height: ",a[t].height),(a[t].width<700||a[t].height<724)&&n.push(t)}},o=0;o<e.state.selectedFiles.length;o++)t(o);for(var s=[],i=0;i<e.state.selectedFiles.length;i++)s.push({uid:i,name:e.state.selectedFiles[i].name,status:"done",url:e.state.previewImages[i]});e.setState({vettoreFoto:s,position_state:n})}))}},{key:"uploadImages",value:function(){for(var t=this,e=[],o=0;o<this.state.selectedFiles.length;o++)e.push(this.state.selectedFiles[o].name);console.log("posizione della foto errata: ",this.state.position_state),0!=this.state.position_state.length?(console.log(this.state.selectedFiles),console.log(this.state.position_state),1==this.state.position_state.length&&l.a.fire({icon:"error",title:"Errore!",text:"La foto "+this.state.selectedFiles[0].name+" non rispetta la risoluzione. Non \xe8 stato possibile caricare le foto. Rimuoverla o modificare la risoluzione della foto in questione"})):(this.setState({caricamento:!0}),setTimeout((function(){1==t.state.caricamento&&(t.setState({caricamento:!1}),clearTimeout(),l.a.fire({icon:"error",title:"Errore di rete!",text:"Qualcosa \xe8 andato storto nel caricamento delle foto! Riprova."}))}),1e4),Array.from(this.state.selectedFiles).forEach((function(e){j.d.child("/".concat(Date.now(),"-").concat(e.name)).put(e).then((function(e){console.log("mazzeo merda",e.ref.getDownloadURL()),e.ref.getDownloadURL().then((function(e){console.log("File available at",e),console.log("new foto len",t.state.selectedFiles.length),console.log("old foto len",t.state.vettore_foto_old),console.log("INDICE",t.props.indice),0!=t.state.vettore_foto_old.length||t.state.inserita||0!=t.state.vettore_foto_old_2.length?Object(i.l)(e,"home_1",(function(e){(e.status=200)&&(t.setState({inserita:!0,caricamento:!1,upload_completo:!0}),l.a.fire("Completato!","La foto numero 1 \xe8 stata modificata correttamente!","success"),Object(i.c)((function(e){t.setState({listaFoto:e}),console.log("vettoreFotogi\xe0presenti",e),0!=e.length&&(null!=e[0].home_1&&t.setState({vettore_foto_old:[{uid:0,name:0,status:"done",url:e[0].home_1}]},(function(){console.log(t.state.vettore_foto_old)})),null!=e[0].home_2&&t.setState({vettore_foto_old_2:[{uid:1,name:1,status:"done",url:e[0].home_2}]},(function(){console.log(t.state.vettore_foto_old_2)})))}))),console.log(e)})):Object(i.g)(e,"home_1",(function(e){(e.status=200)&&(t.setState({inserita:!0,caricamento:!1,upload_completo:!0}),l.a.fire("Completato!","La foto numero 1 \xe8 stata inserita correttamente!","success"),Object(i.c)((function(e){t.setState({listaFoto:e}),console.log("vettoreFotogi\xe0presenti",e),0!=e.length&&(null!=e[0].home_1&&t.setState({vettore_foto_old:[{uid:0,name:0,status:"done",url:e[0].home_1}]},(function(){console.log(t.state.vettore_foto_old)})),null!=e[0].home_2&&t.setState({vettore_foto_old_2:[{uid:1,name:1,status:"done",url:e[0].home_2}]},(function(){console.log(t.state.vettore_foto_old_2)})))}))),console.log(e)}))}))}))})))}},{key:"render",value:function(){var t=this.state,e=t.selectedFiles,o=t.previewImages;return Object(a.jsx)("div",{children:Object(a.jsxs)("div",{children:[0!=this.state.vettore_foto_old.length&&Object(a.jsx)("div",{children:Object(a.jsxs)("div",{className:"clearfix",children:[Object(a.jsx)(m.a,{message:"Foto attualmente presenti",type:"info",showIcon:!0}),Object(a.jsx)(g.a,{listType:"picture-card",fileList:this.state.vettore_foto_old,onChange:this.handleChange})]})}),this.state.upload_completo?Object(a.jsx)(m.a,{message:"Upload avvenuto con successo!",description:"Le modifiche sono state effettuate correttamente.",type:"success",showIcon:!0}):Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-8",children:Object(a.jsx)("label",{className:"btn btn-default p-0",children:Object(a.jsx)(p.a,{type:"file",accept:"image/*",onChange:this.selectFiles})})}),o&&Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"clearfix",children:Object(a.jsx)(g.a,{listType:"picture-card",fileList:this.state.vettoreFoto})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(_.a,{className:"btn btn-success btn-sm",disabled:!e,onClick:this.uploadImages,children:"Carica foto"})})]}),1==this.state.caricamento&&Object(a.jsx)(v.a,{})]})]})})}}]),o}(n.Component),O=o(178),F=o(639),x=function(t){Object(f.a)(o,t);var e=Object(h.a)(o);function o(t){var a;return Object(r.a)(this,o),(a=e.call(this,t)).selectFiles=a.selectFiles.bind(Object(u.a)(a)),a.uploadImages=a.uploadImages.bind(Object(u.a)(a)),a.state={selectedFiles:void 0,previewImages:[],vettoreFoto:[],inserita:!1,upload_completo:!1,caricamento:!1,vettore_foto_old:[],vettore_foto_old_2:[],indiceColore:[],cancellazione:!1,upload_completo_cancellazione:!1,position_state:[],enable_loop:!0,listaFoto:[]},a}return Object(d.a)(o,[{key:"componentDidMount",value:function(){var t=this;Object(i.c)((function(e){t.setState({listaFoto:e}),console.log("vettoreFotogi\xe0presenti",e),0!=e.length&&(null==e[0].home_2&&null!=e[0].home_1?t.setState({vettore_foto_old:[{uid:0,name:0,status:"done",url:e[0].home_2}]},(function(){console.log(t.state.vettore_foto_old)})):null!=e[0].home_2&&t.setState({vettore_foto_old_2:[{uid:0,name:0,status:"done",url:e[0].home_2}]},(function(){console.log(t.state.vettore_foto_old_2)})))}))}},{key:"selectFiles",value:function(t){for(var e=this,o=[],a=[],n=[],s=0;s<t.target.files.length;s++)o.push(URL.createObjectURL(t.target.files[s])),a.push(document.createElement("img"));this.setState({selectedFiles:t.target.files,previewImages:o,cancellazione:!1},(function(){for(var t=function(t){a[t].src=e.state.previewImages[t],a[t].onload=function(){console.log("dentro img",a[t]),console.log("NEW IMAGE width",a[t].width),console.log("NEW IMAGE height: ",a[t].height),(a[t].width<700||a[t].height<724)&&n.push(t)}},o=0;o<e.state.selectedFiles.length;o++)t(o);for(var s=[],i=0;i<e.state.selectedFiles.length;i++)s.push({uid:i,name:e.state.selectedFiles[i].name,status:"done",url:e.state.previewImages[i]});e.setState({vettoreFoto:s,position_state:n})}))}},{key:"uploadImages",value:function(){for(var t=this,e=[],o=0;o<this.state.selectedFiles.length;o++)e.push(this.state.selectedFiles[o].name);console.log("posizione della foto errata: ",this.state.position_state),0!=this.state.position_state.length?(console.log(this.state.selectedFiles),console.log(this.state.position_state),1==this.state.position_state.length&&l.a.fire({icon:"error",title:"Errore!",text:"La foto "+this.state.selectedFiles[0].name+" non rispetta la risoluzione. Non \xe8 stato possibile caricare le foto. Rimuoverla o modificare la risoluzione della foto in questione"})):(this.setState({caricamento:!0}),setTimeout((function(){1==t.state.caricamento&&(t.setState({caricamento:!1}),clearTimeout(),l.a.fire({icon:"error",title:"Errore di rete!",text:"Qualcosa \xe8 andato storto nel caricamento delle foto! Riprova."}))}),1e4),Array.from(this.state.selectedFiles).forEach((function(e){j.d.child("/".concat(Date.now(),"-").concat(e.name)).put(e).then((function(e){console.log("mazzeo merda",e.ref.getDownloadURL()),e.ref.getDownloadURL().then((function(e){console.log("File available at",e),console.log("new foto len",t.state.selectedFiles.length),console.log("old foto len",t.state.vettore_foto_old),console.log("INDICE",t.props.indice),0!=t.state.vettore_foto_old.length||t.state.inserita||0!=t.state.vettore_foto_old_2.length?Object(i.l)(e,"home_2",(function(e){(e.status=200)&&(t.setState({inserita:!0,caricamento:!1,upload_completo:!0}),l.a.fire("Completato!","La foto numero 1 \xe8 stata modificata correttamente!","success"),Object(i.c)((function(e){t.setState({listaFoto:e}),console.log("vettoreFotogi\xe0presenti",e),0!=e.length&&(null!=e[0].home_1&&t.setState({vettore_foto_old:[{uid:0,name:0,status:"done",url:e[0].home_1}]},(function(){console.log(t.state.vettore_foto_old)})),null!=e[0].home_2&&t.setState({vettore_foto_old_2:[{uid:1,name:1,status:"done",url:e[0].home_2}]},(function(){console.log(t.state.vettore_foto_old_2)})))}))),console.log(e)})):Object(i.g)(e,"home_2",(function(e){(e.status=200)&&(t.setState({inserita:!0,caricamento:!1,upload_completo:!0}),l.a.fire("Completato!","La foto numero 1 \xe8 stata inserita correttamente!","success"),Object(i.c)((function(e){t.setState({listaFoto:e}),console.log("vettoreFotogi\xe0presenti",e),0!=e.length&&(null!=e[0].home_1&&t.setState({vettore_foto_old:[{uid:0,name:0,status:"done",url:e[0].home_1}]},(function(){console.log(t.state.vettore_foto_old)})),null!=e[0].home_2&&t.setState({vettore_foto_old_2:[{uid:1,name:1,status:"done",url:e[0].home_2}]},(function(){console.log(t.state.vettore_foto_old_2)})))}))),console.log(e)}))}))}))})))}},{key:"render",value:function(){var t=this.state,e=t.selectedFiles,o=t.previewImages;return Object(a.jsx)("div",{children:Object(a.jsxs)("div",{children:[0!=this.state.vettore_foto_old_2.length&&Object(a.jsx)("div",{children:Object(a.jsxs)("div",{className:"clearfix",children:[Object(a.jsx)(m.a,{message:"Foto attualmente presenti",type:"info",showIcon:!0}),Object(a.jsx)(g.a,{listType:"picture-card",fileList:this.state.vettore_foto_old_2})]})}),this.state.upload_completo?Object(a.jsx)(m.a,{message:"Upload avvenuto con successo!",description:"Le modifiche sono state effettuate correttamente.",type:"success",showIcon:!0}):Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-8",children:Object(a.jsx)("label",{className:"btn btn-default p-0",children:Object(a.jsx)(p.a,{type:"file",accept:"image/*",onChange:this.selectFiles})})}),o&&Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"clearfix",children:Object(a.jsx)(g.a,{listType:"picture-card",fileList:this.state.vettoreFoto})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(_.a,{className:"btn btn-success btn-sm",disabled:!e,onClick:this.uploadImages,children:"Carica foto"})})]}),1==this.state.caricamento&&Object(a.jsx)(v.a,{})]})]})})}}]),o}(n.Component),w=s.a.TabPane;e.default=function(){return Object(n.useEffect)((function(){}),[]),Object(a.jsxs)("div",{children:[Object(a.jsx)(F.a,{className:"border-bottom",overlap:!0,children:Object(a.jsx)("div",{className:"container",children:Object(a.jsxs)(O.a,{className:"py-2",mobileFlex:!1,justifyContent:"between",alignItems:"center",children:[Object(a.jsxs)("h2",{className:"mb-3",children:["Modifica qui le tue foto"," "]}),Object(a.jsx)("div",{className:"mb-3"})]})})}),Object(a.jsxs)(s.a,{defaultActiveKey:"1",style:{marginTop:30},children:[Object(a.jsx)(w,{tab:"Home_1",children:Object(a.jsx)(b,{})},1),Object(a.jsx)(w,{tab:"Home_2",children:Object(a.jsx)(x,{})},2)]})]})}}}]);
//# sourceMappingURL=14.1c067289.chunk.js.map